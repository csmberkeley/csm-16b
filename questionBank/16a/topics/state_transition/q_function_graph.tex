\qns{Functional Pumps}

Let us model a linear function $f(x_1, x_2)$ with outputs $y_1, y_2, y_3$ as a pump given by the diagram below.

\begin{center}
\begin{tikzpicture}[>=stealth',shorten >=1pt,auto,node distance=2cm]
  \node[state] (x1) at (0, -3) {$x_1$};
  \node[state] (x2) at (0, 0) {$x_2$};
  \node[state] (b) at (3, 0) {b};
  \node[state] (a) at (3, -3) {a};
  \node[state] (y1) at (6, 0) {$y_1$};
  \node[state] (y2) at (6, -1.5) {$y_2$};
  \node[state] (y3) at (6, -3) {$y_3$};


  \path[->] (x1) edge  node {1} (a) 
        (x2) edge node {1} (b)
        (a) edge node {$\frac{1}{3}$} (b)
        (a) edge node {$\frac{1}{3}$} (y2)
        (a) edge node {$\frac{1}{3}$} (y3)
        (b) edge node {$\frac{1}{3}$} (y1)
        (b) edge node {$\frac{2}{3}$} (y2)
        (y1) edge [loop right] node {1} (y1)
        (y2) edge [loop right] node {1} (y2)
        (y3) edge [loop right] node {1} (y3)
        ;
\end{tikzpicture}
\end{center}
 
\begin{enumerate}
%\item
%Write $y_1, y_2, y_3$ in terms of $x_1, x_2$.
%
%\ans{
% $$y_1 = \frac{1}{9} x_1 + \frac{1}{2} x_2 $$
% $$y_2 = \frac{5}{9} x_1 + \frac{2}{3} x_2 $$
% $$y_3 = \frac{1}{3} x_1 $$
%}
%
%\item
%Using the relations you created above, we can write 
%$$ f(x_1, x_2) = 
%\begin{bmatrix}
%y_1 \\
%y_2 \\
%y_3
%\end{bmatrix} = 
%\textbf{A} \begin{bmatrix}
%x_1 \\
%x_2
%\end{bmatrix}
%$$
% Find the matrix \textbf{A}
%
%\ans{
%  $$ \textbf{A} = \begin{bmatrix}
%                    \frac{1}{9} & \frac{1}{2} \\
%                    \frac{5}{9} & \frac{2}{3} \\
%                    \frac{1}{3} & 0
%                  \end{bmatrix}
%  $$
%}

\item
Write the state transition matrix for the above state transistion diagram. Use the state vector:
$$
\begin{bmatrix}
x_1 \\
x_2 \\
a \\
b \\
y_1 \\
y_2 \\ 
y_3
\end{bmatrix}
$$

Think about what steps need to be taken to reduce it to the form in part b.

\ans {
$$
\begin{bmatrix}
  0 & 0 & 0           & 0           & 0 & 0 & 0 \\
  0 & 0 & 0           & 0           & 0 & 0 & 0 \\
  1 & 0 & 0           & 0           & 0 & 0 & 0 \\
  0 & 1 & \frac{1}{3} & 0           & 0 & 0 & 0 \\
  0 & 0 & 0           & \frac{1}{3} & 1 & 0 & 0 \\
  0 & 0 & \frac{1}{3} & \frac{2}{3} & 0 & 1 & 0 \\
  0 & 0 & \frac{1}{3} & 0           & 0 & 0 & 1 
\end{bmatrix}
$$
}
\end{enumerate}
